<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Cooper Mattern - Lab 1 — 1 of 1</title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="author" content="Cooper Mattern" />
  <meta name="description" content="A page for the game Lab 1 by Cooper Mattern." />
  <link rel="stylesheet" href="style.css" type="text/css" media="all" />
 </head>

<body>

<div class = "container">

<div class ="sourcecoverimage">
	<span><a href="Cover.jpg"><img src="Small Cover.jpg" border="1"></a></span>
</div>

<div class ="sourceintroduction">
	<h1>
		<span>Lab 1</span> <span class="pagination">— 1 of 1</span>
	</h1>
	<h2>
		<span>Cooper Mattern</span>
	</h2>
	<div class ="sourcebibliography">
		<span>Release 1</span>
	</div>
</div>

<div class = "links">
<ul>
<li><a href="index.html">Home page</a></li><li><a href="source.txt">Complete text</a></li>
</ul>
</div>

<div class = "source">
<p class="indent0"><span class="heading">&quot;<span class="quote">Lab 1</span>&quot; by Cooper Mattern</span></p><p class="indent0">Release along with a website, an interpreter, source text, a file of &quot;<span class="quote">Playthrough</span>&quot; called &quot;<span class="quote">playthrough.txt</span>&quot;, and a file of &quot;<span class="quote">Report</span>&quot; called &quot;<span class="quote">report.pdf</span>&quot;.</p><p class="indent0"><span class="comment">[ Kinds and Properties ]</span></p><p class="indent0">A goat-status is a kind of value.  The goat-statuses are unaware, knows-missing, knows-stable, knows-found.</p><p class="indent0">A person has a goat-status called status.  The status of a person is usually unaware.</p><p class="indent0">A person has a list of rooms called movement path.</p><p class="indent0">A person has a number called movement delay.</p><p class="indent0">A person has a number called talk delay.</p><p class="indent0">A person can be moving or idle.  A person is usually idle.</p><p class="indent0">The talk delay of a person is usually 0.</p><p class="indent0">A person has a table name called schedule.</p><p class="indent0">A person has a truth state called waiting for the player to leave.</p><p class="indent0">The waiting for the player to leave of a person is usually false.</p><p class="indent0">A person has a truth state called knows-Allen-is-guilty.</p><p class="indent0">The knows-Allen-is-guilty of a person is usually false.</p><p class="indent0">A person has an object called conversing‑with.</p><p class="indent0"><span class="comment">[ NPC Attributes for Schedules ]</span></p><p class="indent0"><span class="heading">Table of Joseph's Schedule</span></p><table><tr><td><span class="columnhead">time</span></td><td><span class="columnhead">destination</span></td></tr>
<tr><td>8:00 AM</td><td>The Common Area</td></tr>
<tr><td>9:00 AM</td><td>The Fishing House</td></tr>
<tr><td>5:00 PM</td><td>The Common Area</td></tr>
<tr><td>7:00 PM</td><td>JosephHopeHouse</td></tr>
</table><p class="indent0"><span class="heading">Table of Hope's Schedule</span></p><table><tr><td><span class="columnhead">time</span></td><td><span class="columnhead">destination</span></td></tr>
<tr><td>8:00 AM</td><td>The Common Area</td></tr>
<tr><td>9:00 AM</td><td>The Village Shoppe</td></tr>
<tr><td>5:00 PM</td><td>The Common Area</td></tr>
<tr><td>7:00 PM</td><td>JosephHopeHouse</td></tr>
</table><p class="indent0"><span class="heading">Table of Melia's Schedule</span></p><table><tr><td><span class="columnhead">time</span></td><td><span class="columnhead">destination</span></td></tr>
<tr><td>7:00 AM</td><td>The Taproom</td></tr>
<tr><td>9:00 AM</td><td>The Taproom</td></tr>
<tr><td>5:00 PM</td><td>The Taproom</td></tr>
<tr><td>7:00 PM</td><td>MeliaTomHouse</td></tr>
</table><p class="indent0"><span class="heading">Table of Tom's Schedule</span></p><table><tr><td><span class="columnhead">time</span></td><td><span class="columnhead">destination</span></td></tr>
<tr><td>8:00 AM</td><td>The Common Area</td></tr>
<tr><td>9:00 AM</td><td>The Wheat Field</td></tr>
<tr><td>5:00 PM</td><td>The Taproom</td></tr>
<tr><td>7:00 PM</td><td>MeliaTomHouse</td></tr>
</table><p class="indent0"><span class="heading">Table of Allen's Schedule</span></p><table><tr><td><span class="columnhead">time</span></td><td><span class="columnhead">destination</span></td></tr>
<tr><td>8:00 AM</td><td>The Common Area</td></tr>
<tr><td>9:00 AM</td><td>The South Forest</td></tr>
<tr><td>5:00 PM</td><td>The Taproom</td></tr>
<tr><td>7:00 PM</td><td>AllenHouse</td></tr>
</table><p class="indent0"><span class="comment">[ Helper Functions ]</span></p><p class="indent0">After looking:</p><p class="indent1">let exit count be 0;</p><p class="indent1">repeat with way running through directions:</p><p class="indent2">let destination be the room the way from the location;</p><p class="indent2">if destination is a room:</p><p class="indent3">if exit count is 0:</p><p class="indent4">say &quot;<span class="quote">From here, you can go:[</span><span class="substitution">line break</span><span class="quote">]</span>&quot;;</p><p class="indent3">let the portal be the door the way from the location;</p><p class="indent3">if portal is a door:</p><p class="indent4">if portal is closed:</p><p class="indent5">say &quot;<span class="quote">    [</span><span class="substitution">way</span><span class="quote">] through [</span><span class="substitution">the portal</span><span class="quote">].[</span><span class="substitution">line break</span><span class="quote">]</span>&quot;;</p><p class="indent4">else:</p><p class="indent5">say &quot;<span class="quote">    [</span><span class="substitution">way</span><span class="quote">] through the open [</span><span class="substitution">portal</span><span class="quote">] to [</span><span class="substitution">destination</span><span class="quote">].[</span><span class="substitution">line break</span><span class="quote">]</span>&quot;;</p><p class="indent3">else:</p><p class="indent4">say &quot;<span class="quote">    [</span><span class="substitution">way</span><span class="quote">] to [</span><span class="substitution">destination</span><span class="quote">].[</span><span class="substitution">line break</span><span class="quote">]</span>&quot;;</p><p class="indent3">now exit count is exit count + 1;</p><p class="indent1">if exit count is 0:</p><p class="indent2">say &quot;<span class="quote">There are no obvious exits from here.</span>&quot;;</p><p class="indent0">Before doing something other than looking, examining, or getting off when the player is on a supporter (called the perch):</p><p class="indent1">say &quot;<span class="quote">You climb down from [</span><span class="substitution">the perch</span><span class="quote">].</span>&quot;;</p><p class="indent1">silently try getting off the perch;</p><p class="indent1">continue the action.</p><p class="indent1"></p><p class="indent0"><span class="comment">[ Get destination of a path ]</span></p><p class="indent0">To decide which room is the last entry in (L - a list of rooms):</p><p class="indent1">decide on entry the number of entries in L of L.</p><p class="indent1"></p><p class="indent0"><span class="comment">[ Breadth‑first path search ]</span></p><p class="indent0">To decide which list of rooms is the path from (startRoom – a room) to (endRoom – a room):</p><p class="indent1">let frontier be a list of list of rooms;</p><p class="indent1">let initialPath be a list of rooms;</p><p class="indent1">add startRoom to initialPath;</p><p class="indent1">add initialPath to frontier;</p><p class="indent1">while the number of entries in frontier &gt; 0:</p><p class="indent2">let currentPath be entry 1 of frontier;</p><p class="indent2">remove entry 1 from frontier;</p><p class="indent2">let currentRoom be the last entry in currentPath;</p><p class="indent2">if currentRoom is endRoom:</p><p class="indent3">remove entry 1 from currentPath;</p><p class="indent3">decide on currentPath;</p><p class="indent2">repeat with way running through directions:</p><p class="indent3">let neighbor be the room way from currentRoom;</p><p class="indent3">if neighbor is a room and neighbor is not listed in currentPath:</p><p class="indent4">let newPath be a list of rooms;</p><p class="indent4">repeat with R running through currentPath:</p><p class="indent5">add R to newPath;</p><p class="indent4">add neighbor to newPath;</p><p class="indent4">add newPath to frontier;</p><p class="indent1">decide on {};  <span class="comment">[ no path found → empty list ]</span></p><p class="indent1"></p><p class="indent0"><span class="comment">[ NPC Movement Using Dynamic Paths ]</span></p><p class="indent0">To set the movement path of (character - a person) from (start - a room) to (end - a room):</p><p class="indent1">let calculated path be the path from start to end;</p><p class="indent1">now the movement path of character is calculated path;</p><p class="indent1">now character is moving.</p><p class="indent0"><span class="comment">[ Story Hook ]</span></p><p class="indent0">When play begins:</p><p class="indent1">say &quot;<span class="quote">You wake up to the sound of birds chirping outside your window. It's a peaceful morning in Clearhollow.</span>&quot;;</p><p class="indent1">now the conversing‑with of the player is nothing;</p><p class="indent1">now the schedule of Joseph is the Table of Joseph's Schedule;</p><p class="indent1">now the schedule of Hope is the Table of Hope's Schedule;</p><p class="indent1">now the schedule of Melia is the Table of Melia's Schedule;</p><p class="indent1">now the schedule of Tom is the Table of Tom's Schedule;</p><p class="indent1">now the schedule of Allen is the Table of Allen's Schedule.</p><p class="indent0">Instead of going north from My House for the first time:</p><p class="indent1">say &quot;<span class="quote">As you step outside, you notice your prized goat is missing from the pen. Determined to find it, you set off to investigate.</span>&quot;;</p><p class="indent1">now the status of the player is knows-missing;</p><p class="indent1">continue the action;</p><p class="indent0"><span class="comment">[ Global Region ]</span></p><p class="indent0">Clearhollow is a region.</p><p class="indent0"><span class="comment">[ The Village ]</span></p><p class="indent0">The Village is a region in Clearhollow.</p><p class="indent1"><span class="comment">[ Village Centre ]</span></p><p class="indent1">Village Centre is a room in The Village. &quot;<span class="quote">The heart of the village, bustling with activity during the day. A large oak tree stands in the center.</span>&quot;</p><p class="indent0"><span class="comment">[ East Village ]</span></p><p class="indent0">East Village is a region in The Village.</p><p class="indent1"><span class="comment">[ East Village Centre ]</span></p><p class="indent1">East Village Centre is a room in East Village. &quot;<span class="quote">This part of the village is quieter, with a few houses and the path leading to the lake.</span>&quot;</p><p class="indent1">East Village Centre is east of Village Centre.</p><p class="indent1">East of East Village Centre is The Lake.</p><p class="indent1"><span class="comment">[ Fishing House ]</span></p><p class="indent1">The Fishing House is a room in East Village. &quot;<span class="quote">The scent of fish lingers in the air. Nets and fishing gear are scattered around.</span>&quot;</p><p class="indent2">The Fishing Door is a door.</p><p class="indent2">The Fishing Door is south of The Fishing House and north of East Village Centre.</p><p class="indent2">The Fishing Door is locked.</p><p class="indent1"><span class="comment">[ John and Hope's House ]</span></p><p class="indent1">JosephHopeHouse is a room in East Village. &quot;<span class="quote">A cozy home with a well-kept garden in front.</span>&quot;</p><p class="indent2">The printed name of JosephHopeHouse is &quot;<span class="quote">Joseph and Hope's House</span>&quot;.</p><p class="indent2">JHHDoor is a door.</p><p class="indent3">The printed name of JHHDoor is &quot;<span class="quote">Joseph and Hope's House's Door</span>&quot;.</p><p class="indent3">JHHDoor is south of East Village Centre and north of JosephHopeHouse.</p><p class="indent3">JHHDoor is locked.</p><p class="indent0"><span class="comment">[ West Village ]</span></p><p class="indent0">West Village is a region in The Village.</p><p class="indent1"><span class="comment">[ West Village Centre ]</span></p><p class="indent1">West Village Centre is a room in West Village. &quot;<span class="quote">The western part of the village feels more rustic, with dirt paths and wooden fences.</span>&quot;</p><p class="indent1">West Village Centre is west of Village Centre.</p><p class="indent1">West of West Village Centre is The West Forest.</p><p class="indent1"><span class="comment">[ My House ]</span></p><p class="indent1">My Plot is a region in West Village.</p><p class="indent2">My House is a room in My Plot. &quot;<span class="quote">Your home is modest but comfortable, with a bed and a small table.</span>&quot;</p><p class="indent3">The House Door is a door.</p><p class="indent4">The House Door is north of My House and south of My Yard.</p><p class="indent3">My Bed is a supporter in My House.</p><p class="indent2">My Yard is a room in My Plot. &quot;<span class="quote">The yard is fenced in, with a path leading to the goat pen.</span>&quot;</p><p class="indent3">The Yard Door is a door.</p><p class="indent4">The Yard Door is north of My Yard and south of the West Village Centre.</p><p class="indent3">The Pen Door is a door.</p><p class="indent4">The Pen Door is west of My Yard and east of goat-pen.</p><p class="indent2">The goat-pen is a room in My Plot. &quot;<span class="quote">The pen is empty, with the gate slightly ajar. Your goat is missing.</span>&quot;</p><p class="indent3">The printed name of goat-pen is &quot;<span class="quote">My Goat Pen</span>&quot;.</p><p class="indent1"><span class="comment">[ Village Tavern ]</span></p><p class="indent1">Village Tavern is a region in West Village.</p><p class="indent2">The Tavern Stable is a room in Village Tavern. &quot;<span class="quote">The stable smells of hay and animals. It's where villagers keep their livestock temporarily.</span>&quot;</p><p class="indent3">The Tavern Door is a door.</p><p class="indent4">The Tavern Door is east of The Common Area and west of The Tavern Stable.</p><p class="indent3">The Tavern Stable is north of West Village Centre.</p><p class="indent2">MossMug is a region in Village Tavern.</p><p class="indent3">The printed name of MossMug is &quot;<span class="quote">Moss and Mug Tavern</span>&quot;.</p><p class="indent3">The Common Area is a room in MossMug. &quot;<span class="quote">The tavern's main area, filled with tables and chairs. Villagers gather here to eat and talk.</span>&quot;</p><p class="indent4">The Tavern Back Door is a door.</p><p class="indent5">The Tavern Back Door is north of The Common Area.</p><p class="indent5">North of The Tavern Back Door is The North Forest.</p><p class="indent3">The Taproom is a room in MossMug. &quot;<span class="quote">The taproom is lively, with the sound of mugs clinking and laughter echoing.</span>&quot;</p><p class="indent4">The Taproom is west of The Common Area.</p><p class="indent3">The Lodge is a room in MossMug. &quot;<span class="quote">A quieter area of the tavern, reserved for overnight guests.</span>&quot;</p><p class="indent4">The Lodge Door is a door.</p><p class="indent5">The Lodge Door is north of The Lodge and south of The Common Area.</p><p class="indent0"><span class="comment">[ North Village ]</span></p><p class="indent0">North Village is a region in The Village.</p><p class="indent1"><span class="comment">[ North Village Centre ]</span></p><p class="indent1">North Village Centre is a room in North Village. &quot;<span class="quote">The northern part of the village is surrounded by fields and forests.</span>&quot;</p><p class="indent1">North Village Centre is north of Village Centre.</p><p class="indent1">North of North Village Centre is The North Forest.</p><p class="indent1"><span class="comment">[ Melia and Tom's House ]</span></p><p class="indent1">MeliaTomHouse is a room in North Village. &quot;<span class="quote">A small but tidy home with a view of the wheat field.</span>&quot;</p><p class="indent2">The printed name of MeliaTomHouse is &quot;<span class="quote">Melia and Tom's House</span>&quot;.</p><p class="indent2">MTHDoor is a door.</p><p class="indent3">The printed name of MTHDoor is &quot;<span class="quote">Melia and Tom's House's Door</span>&quot;.</p><p class="indent3">MTHDoor is west of North Village Centre and east of MeliaTomHouse.</p><p class="indent3">MTHDoor is locked.</p><p class="indent1"><span class="comment">[ Wheat Field ]</span></p><p class="indent1">The Wheat Field is a room in North Village. &quot;<span class="quote">Golden stalks of wheat sway gently in the breeze. A hole is visible near the edge of the field.</span>&quot;</p><p class="indent2">The Wheat Field is east of North Village Centre.</p><p class="indent2">The Wheat Field is north of The Fishing House.</p><p class="indent2">East of The Wheat Field is The Lake.</p><p class="indent2">North of The Wheat Field is The North Forest.</p><p class="indent0"><span class="comment">[ South Village ]</span></p><p class="indent0">South Village is a region in The Village.</p><p class="indent1"><span class="comment">[ South Village Centre ]</span></p><p class="indent1">South Village Centre is a room in South Village. &quot;<span class="quote">The southern part of the village has a few shops and houses.</span>&quot;</p><p class="indent2">South Village Centre is south of Village Centre.</p><p class="indent2">South of South Village Centre is The South Forest.</p><p class="indent1"><span class="comment">[ Allen's House ]</span></p><p class="indent1">AllenHouse is a room in South Village. &quot;<span class="quote">Allen's house is simple, with hunting gear propped against the walls.</span>&quot;</p><p class="indent2">The printed name of AllenHouse is &quot;<span class="quote">Allen's House</span>&quot;.</p><p class="indent2">AHDoor is a door.</p><p class="indent3">The printed name of AHDoor is &quot;<span class="quote">Allen's House's Door</span>&quot;.</p><p class="indent3">AHDoor is west of South Village Centre and east of AllenHouse.</p><p class="indent3">AHDoor is locked.</p><p class="indent1"><span class="comment">[ Village Shoppe ]</span></p><p class="indent1">The Village Shoppe is a room in South Village. &quot;<span class="quote">The shop is stocked with various goods, from fresh produce to tools.</span>&quot;</p><p class="indent2">The printed name of The Village Shoppe is &quot;<span class="quote">The Common Shelf</span>&quot;.</p><p class="indent2">VSDoor is a door.</p><p class="indent3">The printed name of VSDoor is &quot;<span class="quote">The Common Shelf's Door.</span>&quot;</p><p class="indent3">VSDoor is east of South Village Centre and west of The Village Shoppe.</p><p class="indent0"><span class="comment">[ Village Boundaries ]</span></p><p class="indent0">The Boundaries is a region in Clearhollow.</p><p class="indent1">The Lake is a room in The Boundaries. &quot;<span class="quote">The lake shimmers under the sunlight, its surface calm and inviting. Trees surround the area, creating a serene atmosphere.</span>&quot;</p><p class="indent2">West of The Lake is nowhere.</p><p class="indent1">The North Forest is a room in The Boundaries. &quot;<span class="quote">The forest is dense and quiet, with tall trees casting long shadows on the ground.</span>&quot;</p><p class="indent2">South of The North Forest is nowhere.</p><p class="indent1">The West Forest is a room in The Boundaries. &quot;<span class="quote">The forest here feels ancient, with gnarled roots and thick underbrush.</span>&quot;</p><p class="indent2">East of The West Forest is nowhere.</p><p class="indent1">The South Forest is a room in The Boundaries. &quot;<span class="quote">The forest opens up slightly here, with patches of sunlight breaking through the canopy.</span>&quot;</p><p class="indent2">North of The South Forest is nowhere.</p><p class="indent1"><span class="comment">[ Direction Overrides ]</span></p><p class="indent1">Instead of</p><p class="indent2">going east when the room east of the location is The Lake</p><p class="indent2">or going west when the room west of the location is The West Forest</p><p class="indent2">or going north when the room north of the location is The North Forest</p><p class="indent2">or going south when the room south of the location is The South Forest:</p><p class="indent2">say &quot;<span class="quote">You dont feel like going for a swim today. Let's focus on finding our goat.</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent0"><span class="comment">[ Persons and NPCs ]</span></p><p class="indent0">The player is Rowan.</p><p class="indent1">Rowan is a person.</p><p class="indent1">Rowan is on My Bed.</p><p class="indent0">Joseph is a person in JosephHopeHouse.</p><p class="indent0">Hope is a person in JosephHopeHouse.</p><p class="indent0">Melia is a person in MeliaTomHouse.</p><p class="indent0">Tom is a person in MeliaTomHouse.</p><p class="indent0">Allen is a person in AllenHouse.</p><p class="indent0"><span class="comment">[ NPC Movement Based on Schedules and Modular NPC Movement ]</span></p><p class="indent0">Every turn:</p><p class="indent1">repeat with character running through people:</p><p class="indent2">if character is idle:</p><p class="indent3">let best be 4 AM;</p><p class="indent3">repeat through the schedule of character:</p><p class="indent4">if the time entry is the time of day or the time entry is before the time of day:</p><p class="indent5"> if the time entry is after best:</p><p class="indent6">now best is the time entry;</p><p class="indent3">if there is a destination corresponding to a time of best in the schedule of character:</p><p class="indent4">Choose the row with time of best in the schedule of character;</p><p class="indent4">if the location of the character is not the destination entry:</p><p class="indent5">set the movement path of character from the location of character to the destination entry;</p><p class="indent5">now character is moving;</p><p class="indent2">if character is moving:</p><p class="indent3">let current room be the location of the character;</p><p class="indent3">if the number of entries in the movement path of the character &gt; 0:</p><p class="indent4">let next room be entry 1 of the movement path of the character;</p><p class="indent4">if the character is the conversing-with of the player:</p><p class="indent5">if the talk delay of character &lt; 15:</p><p class="indent6">say &quot;<span class="quote">[</span><span class="substitution">The character</span><span class="quote">] pauses and says, 'I'm heading to [</span><span class="substitution">the last entry in the movement path of the character </span><span class="quote">], but I can spare a moment to talk.'</span>&quot;;</p><p class="indent6">now the talk delay of character is the talk delay of character + 5;</p><p class="indent5">else:</p><p class="indent6">say &quot;<span class="quote">[</span><span class="substitution">The character</span><span class="quote">] says, 'I really need to get going now.'</span>&quot;;</p><p class="indent6">now the talk delay of character is 0;</p><p class="indent6">now the conversing-with of the player is nothing;</p><p class="indent4">else:</p><p class="indent5">move character to next room;</p><p class="indent5">remove entry 1 from the movement path of the character;</p><p class="indent5">if the number of entries in the movement path of the character is 0:</p><p class="indent6">now character is idle;</p><p class="indent0"><span class="comment">[ The Missing Goat ]</span></p><p class="indent0">The Goat is an animal.</p><p class="indent0">The Goat is in The Hole.</p><p class="indent0">The Goat can be tethered or untethered.</p><p class="indent0">The Goat can be stationary or following.</p><p class="indent0">The Goat is stationary and untethered.</p><p class="indent0">Instead of tying The Goat to something:</p><p class="indent1">if the player does not carry The Leash:</p><p class="indent2">say &quot;<span class="quote">You need something to tie the goat with.</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent1">if the noun is The Tying Post:</p><p class="indent2">say &quot;<span class="quote">You tie the goat securely to the post.</span>&quot;;</p><p class="indent2">now The Goat is tethered;</p><p class="indent2">now The Goat is fixed in place;</p><p class="indent2">stop the action;</p><p class="indent1">say &quot;<span class="quote">You can't tie the goat to that.</span>&quot;;</p><p class="indent0">Instead of taking The Goat:</p><p class="indent1">if the player does not carry The Leash:</p><p class="indent2">say &quot;<span class="quote">You can't take the goat without something to lead it.</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent1">say &quot;<span class="quote">You attach the leash to the goat. The goat will now follow you.</span>&quot;;</p><p class="indent1">now The Goat is untethered;</p><p class="indent1">now The Goat is following;</p><p class="indent0">Every turn when Tom is in the location of the Goat and the Goat is tethered:</p><p class="indent1">now the Goat is untethered;</p><p class="indent1">now the Goat is following;</p><p class="indent1">say &quot;<span class="quote">Tom hands you the leash. The goat follows you now.</span>&quot;;</p><p class="indent0">Every turn when the Goat is following:</p><p class="indent1">let leader be the player;</p><p class="indent1">if Tom holds the leash, let leader be Tom;</p><p class="indent1">if the location of the Goat is not the location of leader:</p><p class="indent2">move the Goat to the location of leader;</p><p class="indent2">if the player can see the Goat:</p><p class="indent3">say &quot;<span class="quote">The goat follows [</span><span class="substitution">if the leader is the player</span><span class="quote">]you[</span><span class="substitution">otherwise</span><span class="quote">]Tom[</span><span class="substitution">end if</span><span class="quote">] closely.</span>&quot;;</p><p class="indent0">Every turn when the Goat is untethered and the player carries the leash and the status of the player is knows-found:</p><p class="indent1">if the location of the Goat is not the location of the player:</p><p class="indent2">move the Goat to the location of the player;</p><p class="indent2">say &quot;<span class="quote">The goat trots after you, leash in hand.</span>&quot;;</p><p class="indent1">otherwise if the player is in the goat-pen and the Goat is not fixed in place:</p><p class="indent2">say &quot;<span class="quote">The goat bleats softly, eyeing the tying post.</span>&quot;;</p><p class="indent0">The Hole is a container in The Wheat Field.</p><p class="indent0">The Hole is fixed in place.</p><p class="indent0">The Shovel is a thing in AllenHouse.</p><p class="indent0">The Shovel is portable.</p><p class="indent0">The description of The Shovel is &quot;<span class="quote">A sturdy shovel with a wooden handle. It looks recently used, with dirt still clinging to the blade.</span>&quot;;</p><p class="indent0">After taking the Shovel:</p><p class="indent1">say &quot;<span class="quote">You pick up the shovel. It might come in handy.</span>&quot;</p><p class="indent0">The Leash is a thing in My Yard. &quot;<span class="quote">A sturdy leather leash lies coiled on the ground.</span>&quot;</p><p class="indent0">The Leash is portable.</p><p class="indent0">The Tying Post is a fixed in place thing in goat-pen. &quot;<span class="quote">A wooden post stands firmly in the ground, perfect for tying a goat to.</span>&quot;</p><p class="indent0"><span class="comment">[ Time Progression Mechanic ]</span></p><p class="indent0">The time of day is 7:01 AM.</p><p class="indent0">The time rate is a number that varies.</p><p class="indent0">When play begins:</p><p class="indent1">now the time rate is 5.</p><p class="indent0">Every turn:</p><p class="indent1">increase time of day by 4 minutes;</p><p class="indent1">say &quot;<span class="quote">[</span><span class="substitution">time of day</span><span class="quote">]</span>&quot;;</p><p class="indent1">if the time of day is 8:00 PM:</p><p class="indent2">if the Goat is in The Tavern Stable:</p><p class="indent3">say &quot;<span class="quote">The sun sets, but at least your goat is safe in the stable. You can continue asking around to uncover the truth.</span>&quot;;</p><p class="indent2">otherwise:</p><p class="indent3">end the story saying &quot;<span class="quote">The sun sets, and you still haven't found your goat. It's too late now.</span>&quot;;</p><p class="indent0"><span class="comment">[ Breakfast Event ]</span></p><p class="indent0">At 8:00 AM:</p><p class="indent1">say &quot;<span class="quote">You hear the breakfast bell ringing. Everyone in the village goes to the tavern across from your house for breakfast.</span>&quot;;</p><p class="indent0"><span class="comment">[ Dinner Event ]</span></p><p class="indent0">At 5:00 PM:</p><p class="indent1">say &quot;<span class="quote">You hear the dinner bell ringing from Moss and Mug. Everyone in the village gathers there for dinner.</span>&quot;;</p><p class="indent0"><span class="comment">[ Midday Event (Hidden) ]</span></p><p class="indent0">At 12:00 PM:</p><p class="indent1">set the movement path of Tom from The Wheat Field to The Taproom;</p><p class="indent1">now Tom is moving;</p><p class="indent1">now the Goat is tethered;</p><p class="indent1">now the Goat is following;</p><p class="indent0"><span class="comment">[ Tom’s Behavior at the Tavern Stable ]</span></p><p class="indent0">Every turn:</p><p class="indent1">if Tom is in The Tavern Stable and the Goat is in The Tavern Stable:</p><p class="indent2">now the Goat is tethered;</p><p class="indent2">now the Goat is fixed in place;</p><p class="indent2">if the player is in The Tavern Stable:</p><p class="indent3">say &quot;<span class="quote">Tom ties the goat securely to a post in the Tavern Stable.</span>&quot;;</p><p class="indent0">Every turn:</p><p class="indent1">if Tom is moving and the player is in the location of Tom and the Goat is in the location of Tom:</p><p class="indent2">say &quot;<span class="quote">Tom notices you and hands you the leash to the goat. 'Here, you take care of it. I found it in a hole in the field,' he says.</span>&quot;;</p><p class="indent2">now the Goat is untethered;</p><p class="indent2">now the Goat is following;</p><p class="indent2">now Tom is idle;</p><p class="indent2">now the waiting for the player to leave of Tom is true;</p><p class="indent2">stop the action;</p><p class="indent0"><span class="comment">[ Tom Resumes Movement After Player Leaves ]</span></p><p class="indent0">Every turn:</p><p class="indent1">if the waiting for the player to leave of Tom is true and the player is not in the location of Tom:</p><p class="indent2">now the waiting for the player to leave of Tom is false;</p><p class="indent2">let best be 12:00 AM;</p><p class="indent2">repeat through the schedule of Tom:</p><p class="indent3">if the time entry is the time of day or the time entry is before the time of day:</p><p class="indent4"> if the time entry is after best:</p><p class="indent5">now best is the time entry;</p><p class="indent2">Choose the row with time of best in the schedule of Tom;</p><p class="indent2">set the movement path of Tom from the location of Tom to the destination entry;</p><p class="indent2">now Tom is moving;</p><p class="indent0"><span class="comment">[ Endings ]</span></p><p class="indent0">Instead of examining The Goat when The Goat is in The Tavern Stable:</p><p class="indent1">if the player carries The Shovel:</p><p class="indent2">say &quot;<span class="quote">You realize Allen's shovel was used to dig the hole. Allen must have done it!</span>&quot;;</p><p class="indent2">end the story saying &quot;<span class="quote">You found your goat and know who did it.</span>&quot;;</p><p class="indent1">otherwise:</p><p class="indent2">say &quot;<span class="quote">You found your goat, but you have no idea who dug the hole.</span>&quot;;</p><p class="indent2">now the status of the player is knows-found;</p><p class="indent0">Instead of examining The Hole:</p><p class="indent1">If The Goat is in The Hole:</p><p class="indent2">move The Goat to The Wheat Field;</p><p class="indent2">now the status of the player is knows-found;</p><p class="indent2">say &quot;<span class="quote">You find your goat stuck in the hole. It looks scared but unharmed.</span>&quot;;</p><p class="indent1">if the player carries The Shovel:</p><p class="indent2">say &quot;<span class="quote">You notice the hole was freshly dug, and Allen's shovel fits the marks perfectly.</span>&quot;;</p><p class="indent2">now the knows-Allen-is-guilty of the player is true.</p><p class="indent0">Instead of waiting when the time of day is 8:00 PM:</p><p class="indent1">if the knows-Allen-is-guilty of the player is true:</p><p class="indent2">end the story saying &quot;<span class="quote">You couldn't find your goat, but you know Allen was behind it.</span>&quot;;</p><p class="indent1">otherwise if the status of the player is knows-found:</p><p class="indent2">end the story saying &quot;<span class="quote">You found your goat, but you have no idea who dug the hole.</span>&quot;;</p><p class="indent1">otherwise:</p><p class="indent2">end the story saying &quot;<span class="quote">The sun sets, and you still haven't found your goat. It's too late now.</span>&quot;.</p><p class="indent0"><span class="comment">[ Knocking Action ]</span></p><p class="indent0">Knocking is an action applying to one thing.</p><p class="indent0">Understand &quot;<span class="quote">knock on [</span><span class="substitution">something</span><span class="quote">]</span>&quot; as knocking.</p><p class="indent0">Check knocking:</p><p class="indent1">if the noun is not a door:</p><p class="indent2">say &quot;<span class="quote">You can't knock on that.</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent1">if the noun is a door and the noun is not locked:</p><p class="indent2">say &quot;<span class="quote">There's no need to knock. The door is already unlocked.</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent0">Carry out knocking:</p><p class="indent1">if the noun is JHHDoor and Joseph is in JosephHopeHouse:</p><p class="indent2">move Joseph to the location;</p><p class="indent2">say &quot;<span class="quote">You knock on the door. Joseph steps out and says, 'What can I do for you?'</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent1">if the noun is AHDoor and Allen is in AllenHouse:</p><p class="indent2">move Allen to the location;</p><p class="indent2">say &quot;<span class="quote">You knock on the door. Allen steps out, looking annoyed. 'What do you want?' he asks.</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent1">if the noun is MTHDoor and Tom is in MeliaTomHouse:</p><p class="indent2">move Tom to the location;</p><p class="indent2">say &quot;<span class="quote">You knock on the door. Tom steps out, wiping his hands. 'Evening,' he says. 'What brings you here?'</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent1">say &quot;<span class="quote">You knock, but no one answers.</span>&quot;;</p><p class="indent0"><span class="comment">[ Prompt Player to Knock on Locked Doors ]</span></p><p class="indent0">Before opening a locked door:</p><p class="indent1">if the door is JHHDoor and Joseph is in JosephHopeHouse:</p><p class="indent2">say &quot;<span class="quote">The door is locked. Perhaps you should try knocking.</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent1">if the door is AHDoor and Allen is in AllenHouse:</p><p class="indent2">say &quot;<span class="quote">The door is locked. Perhaps you should try knocking.</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent1">if the door is MTHDoor and Tom is in MeliaTomHouse:</p><p class="indent2">say &quot;<span class="quote">The door is locked. Perhaps you should try knocking.</span>&quot;;</p><p class="indent2">stop the action;</p><p class="indent0"><span class="comment">[ NPC Response Tables ]</span></p><p class="indent0"><span class="heading">Table of NPC Responses About the Goat - Goat Responses</span></p><table><tr><td><span class="columnhead">NPC (text)</span></td><td><span class="columnhead">Response if Seen in Stable (text)</span></td><td><span class="columnhead">Response if Not Aware of Goat (text)</span></td><td><span class="columnhead">Response if Told Found (text)</span></td></tr>
<tr><td>&quot;<span class="quote">Joseph</span>&quot;</td><td>&quot;<span class="quote">'I saw your goat in the stable earlier,' Joseph says. 'It looked fine to me.'</span>&quot;</td><td>&quot;<span class="quote">'I haven't heard anything about your goat, maybe someone else knows something.'</span>&quot;</td><td>&quot;<span class="quote">'That's great news! I'm glad you found it.'</span>&quot;</td></tr>
<tr><td>&quot;<span class="quote">Hope</span>&quot;</td><td>&quot;<span class="quote">'I saw your goat in the stable earlier,' Hope says. 'It seemed safe there.'</span>&quot;</td><td>&quot;<span class="quote">'I haven't heard anything about your goat, Hope says. 'Sorry I can't help.'</span>&quot;</td><td>&quot;<span class="quote">'I'm so glad you found your goat,' Hope says with a smile.</span>&quot;</td></tr>
<tr><td>&quot;<span class="quote">Melia</span>&quot;</td><td>&quot;<span class="quote">'Your goat is in the stable now,' Melia says. 'But it's strange how it ended up in that hole.'</span>&quot;</td><td>&quot;<span class="quote">'I haven't heard anything about your goat,' Melia says. 'Maybe Tom knows something.'</span>&quot;</td><td>&quot;<span class="quote">'Good to hear you found your goat,' Melia says. 'That must be a relief.'</span>&quot;</td></tr>
<tr><td>&quot;<span class="quote">Tom</span>&quot;</td><td>&quot;<span class="quote">'I found your goat in the field,' Tom says. 'It was stuck in a hole. Strange, isn't it?'</span>&quot;</td><td>&quot;<span class="quote">'I haven't heard anything about your goat,' Tom says. 'I'll let you know if I find anything.'</span>&quot;</td><td>&quot;<span class="quote">'Glad you found your goat,' Tom says. 'I was worried about it.'</span>&quot;</td></tr>
<tr><td>&quot;<span class="quote">Allen</span>&quot;</td><td>&quot;<span class="quote">'I saw your goat in the stable earlier,' Allen says. 'It looked fine to me.'</span>&quot;</td><td>&quot;<span class="quote">'I haven't heard anything about your goat,' Allen says curtly.</span>&quot;</td><td>&quot;<span class="quote">'Good for you,' Allen says. 'At least that's one less thing to worry about.'</span>&quot;</td></tr>
</table><p class="indent0"><span class="comment">[ NPC Response Logic ]</span></p><p class="indent0">Instead of telling someone about &quot;<span class="quote">goat</span>&quot;:</p><p class="indent1">let name be the printed name of noun;</p><p class="indent1">now the conversing-with of the player is noun;</p><p class="indent1">Choose the row with NPC of name in the Table of Goat Responses;</p><p class="indent1">if the status of the player is knows-found:</p><p class="indent2">say &quot;<span class="quote">[</span><span class="substitution">Response if Told Found entry</span><span class="quote">]</span>&quot;;</p><p class="indent2">now the status of noun is knows-found;</p><p class="indent1">otherwise if the status of the player is knows-stable:</p><p class="indent2">say &quot;<span class="quote">[</span><span class="substitution">Response if Seen in Stable entry</span><span class="quote">]</span>&quot;;</p><p class="indent1">otherwise:</p><p class="indent2">say &quot;<span class="quote">[</span><span class="substitution">Response if Not Aware of Goat entry</span><span class="quote">]</span>&quot;;</p><p class="indent2">now the status of noun is knows-missing;</p><p class="indent0">Instead of asking someone about &quot;<span class="quote">goat</span>&quot;:</p><p class="indent1">let name be the printed name of noun;</p><p class="indent1">now the conversing-with of the player is noun;</p><p class="indent1">Choose the row with NPC of name in the Table of Goat Responses;</p><p class="indent1">if the status of noun is knows-found:</p><p class="indent2">say &quot;<span class="quote">[</span><span class="substitution">Response if Told Found entry</span><span class="quote">]</span>&quot;;</p><p class="indent1">otherwise if the status of noun is knows-stable:</p><p class="indent2">say &quot;<span class="quote">[</span><span class="substitution">Response if Seen in Stable entry</span><span class="quote">]</span>&quot;;</p><p class="indent1">otherwise if the status of noun is unaware:</p><p class="indent2">say &quot;<span class="quote">[</span><span class="substitution">Response if Not Aware of Goat entry</span><span class="quote">]</span>&quot;;</p><p class="indent2"></p><p class="indent0">Every turn when the conversing‑with of the player is not nothing</p><p class="indent1">and the location of the conversing‑with of the player is not the location of the player:</p><p class="indent1">now the conversing‑with of the player is nothing;</p><p class="indent0"><span class="comment">[ NPC Awareness Update ]</span></p><p class="indent0">Every turn:</p><p class="indent1">repeat with character running through people:</p><p class="indent2">if character is in The Tavern Stable and the Goat is in The Tavern Stable:</p><p class="indent3">now the status of character is knows-stable;</p>
</div>

<div class ="notes">

</div>

</div>

</body>

</html>
